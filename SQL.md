# SQL statements used to initialize database tables

```
CREATE TABLE USER(UID integer AUTO_INCREMENT PRIMARY KEY, NAME varchar(20) NOT NULL, ISADMIN BOOL default 0 NOT NULL, ISVERIFIED BOOL default 1 NOT NULL, PASSWORD varchar(20) NOT NULL);

CREATE TABLE OBJECT(OID integer AUTO_INCREMENT PRIMARY KEY, NAME varchar(45) NOT NULL, DESCRIPTION varchar(400), TYPE enum('c', 'p') NOT NULL, CNDTN enum('New', 'Excellent', 'Good', 'Decent', 'Bad', 'Unusable') NOT NULL, ERA varchar(45) NOT NULL, CHECKEDOUTTO integer, FOREIGN KEY (CHECKEDOUTTO) REFERENCES USER(UID));

CREATE TABLE COSTUME(COID integer PRIMARY KEY, FOREIGN KEY (COID) REFERENCES OBJECT(OID), SIZE ENUM('XS', 'S', 'M', 'L', 'XL', '2XL', '3XL') NOT NULL);

CREATE TABLE PROP(PRID integer PRIMARY KEY, FOREIGN KEY (PRID) REFERENCES OBJECT(OID), DIMENSION varchar(30) NOT NULL);

CREATE TABLE AUDITACTION(AAID integer AUTO_INCREMENT PRIMARY KEY, NAME varchar(20) NOT NULL);

CREATE TABLE AUDIT(AID integer AUTO_INCREMENT PRIMARY KEY, ACTION integer NOT NULL, FOREIGN KEY (ACTION) REFERENCES AUDITACTION(AAID), TIME DATETIME NOT NULL, OBJECT integer, FOREIGN KEY (OBJECT) REFERENCES OBJECT(OID), USER integer, FOREIGN KEY (USER) REFERENCES USER(UID));

CREATE TABLE PICTURE(PID integer AUTO_INCREMENT PRIMARY KEY, OBJECT integer NOT NULL, FOREIGN KEY (OBJECT) REFERENCES OBJECT(OID), IMAGE LONGBLOB NOT NULL, OBJORDER integer NOT NULL);

CREATE TABLE COLOR(CID integer AUTO_INCREMENT PRIMARY KEY, NAME varchar(20) NOT NULL);

CREATE TABLE OBJECTCOLOR(OID integer, FOREIGN KEY (OID) REFERENCES OBJECT(OID), CID integer, FOREIGN KEY (CID) REFERENCES COLOR(CID), PRIMARY KEY(OID, CID));
```

# SQL statements used to add test data to database

```
INSERT INTO AUDITACTION(NAME) VALUES ("Login");
INSERT INTO AUDITACTION(NAME) VALUES ("Create Account");
INSERT INTO AUDITACTION(NAME) VALUES ("Add Object");
INSERT INTO AUDITACTION(NAME) VALUES ("Modify Object");
INSERT INTO AUDITACTION(NAME) VALUES ("Delete Object");
INSERT INTO AUDITACTION(NAME) VALUES ("Checkout Object");
INSERT INTO AUDITACTION(NAME) VALUES ("Checkin Object");
INSERT INTO AUDITACTION(NAME) VALUES ("Approve User");

INSERT INTO COLOR(CID, NAME) VALUES (1, "Gold");
INSERT INTO COLOR(CID, NAME) VALUES (2, "Gray");
INSERT INTO COLOR(CID, NAME) VALUES (3, "Red");
INSERT INTO COLOR(CID, NAME) VALUES (4, "Yellow");
INSERT INTO COLOR(CID, NAME) VALUES (5, "Brown");

INSERT INTO USER(NAME, PASSWORD) VALUES ("user", "user");
INSERT INTO USER(NAME, ISADMIN, PASSWORD) VALUES ("admin", 1, "admin");

INSERT INTO OBJECT(OID, NAME, DESCRIPTION, TYPE, CNDTN, ERA) VALUES (1, "Crown", "Shiny, pointy, and goes on head", 'c', 'Good', "Medieval");
INSERT INTO OBJECT(OID, NAME, DESCRIPTION, TYPE, CNDTN, ERA) VALUES (2, "Broadsword", "A big sword for swinging around", 'p', 'Bad', "Medieval");
INSERT INTO OBJECT(OID, NAME, DESCRIPTION, TYPE, CNDTN, ERA) VALUES (3, "Katana", "For when just wearing all black doesn't make you ninja enough", 'p', 'Excellent', "Edo");
INSERT INTO OBJECT(OID, NAME, DESCRIPTION, TYPE, CNDTN, ERA) VALUES (4, "Cape", "NO CAPES!", 'c', 'Excellent', "Modern");
INSERT INTO OBJECT(OID, NAME, DESCRIPTION, TYPE, CNDTN, ERA) VALUES (5, "Sunglasses", "For blocking bright lights or just to look cool", 'c', 'Good', "Modern");
INSERT INTO OBJECT(OID, NAME, DESCRIPTION, TYPE, CNDTN, ERA) VALUES (6, "Trebuchet", "To launch Pumpkin Kid aerially into your enemies", 'p', 'Bad', "Medieval");

INSERT INTO OBJECTCOLOR(OID, CID) VALUES (1, 1);
INSERT INTO OBJECTCOLOR(OID, CID) VALUES (2, 2);
INSERT INTO OBJECTCOLOR(OID, CID) VALUES (3, 2);
INSERT INTO OBJECTCOLOR(OID, CID) VALUES (4, 3);
INSERT INTO OBJECTCOLOR(OID, CID) VALUES (5, 4);
INSERT INTO OBJECTCOLOR(OID, CID) VALUES (6, 5);

INSERT INTO COSTUME(COID, SIZE) VALUES (1, 'L');
INSERT INTO COSTUME(COID, SIZE) VALUES (4, 'S');
INSERT INTO COSTUME(COID, SIZE) VALUES (5, '3XL');

INSERT INTO PROPS(PRID, DIMENSION) VALUES (2, '1x1x1');
INSERT INTO PROPS(PRID, DIMENSION) VALUES (3, '2x7x8');
INSERT INTO PROPS(PRID, DIMENSION) VALUES (6, '5x8x10');
```

# Application Queries
Login Query
```
SELECT UID FROM USER WHERE NAME = $name$ AND PASSWORD = $password$ AND ISVERIFIED = 1;
```
User Registration Query
```
INSERT INTO USER(NAME, PASSWORD) VALUES ($name$, $password$);
```
Admin Registration Query
```
INSERT INTO USER(NAME, PASSWORD, ISADMIN) VALUES ($name$, $password$, 1);
```
Search Query (with filters)
```
SELECT * FROM OBJECT WHERE NAME = $searchName$ [AND TYPE = 'c' | AND TYPE = 'p'] [AND CNDTN = 'New' | AND CNDTN = 'Good' | AND CNDTN = 'Decent' | AND CNDTN = 'Excellent' | AND CNDTN = 'Bad' | AND CNDTN = 'Unusable'] [AND ERA = $era$] [AND NOT (CHECKEDOUTTO = NULL)];
```
Edit Object Query
```
UPDATE OBJECT SET [TYPE = 'c' | TYPE = 'p'] [CNDTN = 'New' | CNDTN = 'Good' | CNDTN = 'Decent' | CNDTN = 'Excellent' | CNDTN = 'Bad' | CNDTN = 'Unusable'] [ERA = $era$] [CHECKOUTTO = $uid$] WHERE OID = $objID$;
```
Add Picture Query
```
INSERT INTO PICTURE(OID, IMAGE) VALUES ($oid$, $imageBlob$);
```
View Logs
```
SELECT * FROM AUDIT WHERE [ACTION = $auditaction$] [OBJECT = $oid$] [USER = $uid$];
```
Remove Object
```
DELETE FROM OBJECT WHERE OID = $oid$;
```
Remove User
```
DELETE FROM USER WHERE UID = $uid$;
```
